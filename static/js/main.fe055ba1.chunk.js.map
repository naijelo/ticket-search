{"version":3,"sources":["components/TicketSearch/TicketSearch.style.js","components/Button/Button.js","components/Button/Button.style.js","components/Input/Input.js","components/Input/Input.style.js","components/Pagination/Pagination.js","components/Pagination/Pagination.style.js","components/DropDown/DropDown.js","components/DropDown/DropDown.style.js","components/Cards/Cards.js","components/Cards/Cards.style.js","components/Calendar/Calendar.js","components/Calendar/Calendar.style.js","components/TicketSearch/TicketSearch.js","GlobalStyles.style.js","App.js","index.js"],"names":["MainTicketSearchWrapper","styled","form","InputSubWrapper","div","DatePickerActivateField","CalendarWrapper","Button","children","rest","StyledButton","props","inputColor","Input","variant","label","type","className","required","StyledInput","Pagination","postsPerPage","totalPosts","paginate","pageNumber","i","Math","ceil","push","map","number","onClick","href","StyledPagination","DropDown","filteredData","addCity","setCustomInput","setFilteredData","value","index","event","name","StyledDropDown","Cards","ticketData","loading","dataError","item","depart_date","StyledCards","CalendarHeader","CalendarMain","CalendarMainWrapper","Calendar","setFullDate","setDateVisibility","useState","Date","date","setDate","yearNames","monthNames","weekDayNames","daysByMonth","emptyDaysOnStartOfMonth","monthSelect","useRef","yearSelect","year","getFullYear","month","getMonth","changeSelect","monthValue","yearValue","clickOnDate","fullDateTemp","getDate","primaryMonthDate","secondaryMonthDate","fillMonthData","tempDate","a","monthData","daysInMonth","emptyMonthStart","getDay","day","j","undefined","firstMonthResult","secondMonthResult","prevDate","ref","element","onChange","nextDate","week","DatePicker","TicketSearch","setDataError","inputFrom","setInputFrom","inputTo","setInputTo","fullDate","filteredDataFrom","setFilteredDataFrom","filteredDataTo","setFilteredDataTo","cities","setCities","setTicketData","setLoading","currentPage","setCurrentPage","dateVisibility","indexOfLastCard","indexOfFirstCard","currentCards","slice","useEffect","axios","response","data","jsondata","fetchData","handleFilter","setWordEntered","target","filter","toLowerCase","includes","charAt","toUpperCase","substr","addCityToState","tagName","textContent","onSubmit","preventDefault","formData","find","code","console","log","requestData","from","to","then","best_prices","catch","err","placeholder","autoFocus","onInput","length","title","GlobalStyles","createGlobalStyle","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fe055ba1.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\n\r\nexport const MainTicketSearchWrapper = styled.form `\r\n    margin-top: 10vh;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    @media (max-width: 575px) {\r\n        justify-content: start;\r\n        align-items: center;\r\n        flex-direction: column;\r\n    }\r\n`\r\n\r\nexport const InputSubWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-right: 2px;\r\n    width: 20vw;\r\n    height: 40px;\r\n    margin-right: 10px;\r\n    @media (max-width: 575px) {\r\n       margin-bottom: 10px;\r\n       width: 50%;\r\n       margin-right: 0;\r\n    }\r\n`\r\n\r\nexport const DatePickerActivateField = styled.div `\r\n    color: orange;\r\n    font-weight: 600;\r\n    position: relative;\r\n    background-color: #fff;\r\n    cursor: pointer;\r\n    width: 20vw;\r\n    height: 40px;\r\n    border-radius: 4px;\r\n    margin-right: 1px;\r\n    text-align: center;\r\n    line-height: 35px;\r\n    @media (max-width: 575px) {\r\n       margin-right: 0;\r\n    }\r\n`\r\nexport const CalendarWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n`\r\n","import React from \"react\";\r\n\r\nconst Button = ( {children, ...rest} ) => {\r\n\r\n    return (\r\n        <button {...rest}>\r\n            {children}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default Button;","import styled from \"styled-components\";\r\nimport Button from \"./Button\";\r\n\r\nexport const StyledButton = styled(Button) `\r\n    border: none;\r\n    height: 40px;\r\n    width: 20%;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    color: white;\r\n    font-weight: 600;\r\n    margin-left: 5px;\r\n    background-color: ${props => props.inputColor || \"#ffa928\"};\r\n    &:hover {\r\n        background-color: black;\r\n    }\r\n    @media (max-width: 575px) {\r\n       margin-top: 10px;\r\n       margin-left: 0;\r\n    }\r\n`","import React from \"react\";\r\n\r\nconst Input = ({variant = \"medium\", children, label, ...rest}) => {\r\n\r\n    return (\r\n        <div>\r\n            <label>{label}\r\n                <input type=\"text\" \r\n                    className={`input ${variant}`} \r\n                    required \r\n                    {...rest}/>\r\n            </label>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Input;","import styled from \"styled-components\";\r\nimport Input from \"./Input\";\r\n\r\nexport const StyledInput = styled(Input)`\r\n    position: relative;\r\n    border-radius: 4px;\r\n    width: 100%;\r\n    height: 38px;\r\n    outline: none;\r\n    border: none;\r\n`","import React from \"react\";\r\nimport \"./Pagination.css\";\r\n\r\nconst Pagination = ({ postsPerPage, totalPosts, paginate, ...rest }) => {\r\n    const pageNumber = [];\r\n\r\n    for (let i = 1; i <= Math.ceil(totalPosts / postsPerPage); i++) {\r\n        pageNumber.push(i);\r\n    }\r\n\r\n    return (\r\n        <nav {...rest}>\r\n            <ul className=\"pagination\">\r\n                {pageNumber.map(number => (\r\n                    <li key={number} className=\"pageItem\">\r\n                        <a onClick={() => paginate(number)} href=\"!#\" className=\"pageLink\">\r\n                            {number}\r\n                        </a>\r\n                    </li>\r\n                ) )}\r\n            </ul>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Pagination;","import styled from \"styled-components\";\r\nimport Pagination from \"./Pagination\";\r\n\r\nexport const StyledPagination = styled(Pagination)`\r\n    display: flex;\r\n    text-align: center;\r\n    justify-content: center;\r\n    li {\r\n        list-style: none;\r\n        &:hover {\r\n            background-color: white;\r\n        }\r\n    }\r\n    a {\r\n        color: black;\r\n        float: left;\r\n        padding: 4px 4px;\r\n        text-decoration: none;\r\n        border: white 1px solid;\r\n        width: 20px;\r\n    }\r\n    &:hover {\r\n        color: white;\r\n    }\r\n`","import React from \"react\";\r\n\r\nconst DropDown = ({ filteredData, addCity, setCustomInput, setFilteredData, ...rest}) => {\r\n    return (\r\n        <ul {...rest}>\r\n        {filteredData.map((value, index) => {\r\n             return(\r\n                    <li className=\"from\" key={index} onClick={event => addCity(event, setCustomInput, setFilteredData)}>\r\n                        {value.name}\r\n                    </li>\r\n             )\r\n            })}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default DropDown;","import styled from \"styled-components\";\r\nimport DropDown from \"./DropDown\";\r\n\r\nexport const StyledDropDown = styled(DropDown) `\r\n    position: absolute;\r\n    z-index: 10;\r\n    width: 100%;\r\n    max-height: 300px; \r\n    max-width: 18%;\r\n    overflow-x: hidden;\r\n    cursor: pointer;\r\n    margin-top: 43px;\r\n    color: #000; \r\n    background: #fff; \r\n\r\n    li {\r\n        list-style: none;\r\n        text-align: center;\r\n        margin: 0px;\r\n        padding: 0px;\r\n    }\r\n    @media (max-width: 575px) {\r\n        width: 100%;\r\n        max-width: 45%;\r\n    }\r\n`","import React from \"react\";\r\n\r\nconst Cards = ({ticketData, loading, dataError, ...rest}) => {\r\n    if (loading) {\r\n        return <h2>Loading...</h2>\r\n    }\r\n    if (dataError) {\r\n        return <h3>К сожалению, мы ничего не нашли по запросу. Давайте попробуем ещё раз?:)</h3>\r\n    }\r\n    return (\r\n        <ul {...rest}>{ticketData.map((item, index) => (\r\n                <li key={index}>\r\n                    <div>Дата вылета: {item.depart_date}</div>\r\n                    <div>Цена в рублях: {item.value}</div>\r\n                </li>\r\n    ))}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default Cards;","import styled from \"styled-components\";\r\nimport Cards from \"./Cards\";\r\n\r\nexport const StyledCards = styled(Cards) `\r\n    color: blue;\r\n    list-style: none;\r\n    color: black;\r\n    width: 50vw;\r\n    margin: 0 auto;\r\n    margin-top: 50px;\r\n    li {\r\n        border: 1px solid white;\r\n        margin: 5px;\r\n        padding: 5px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    \r\n`","import React, {useState, useRef} from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst CalendarHeader = styled.div `\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-bottom: 10px;\r\n`\r\nconst CalendarMain  = styled.div `\r\n    border: 1px solid white;\r\n`\r\n\r\nconst CalendarMainWrapper = styled.div`\r\n    display: flex;\r\n`\r\n\r\nconst Calendar = ({setFullDate, setDateVisibility, ...rest}) => {\r\n\r\nconst [date, setDate] = useState(new Date());\r\n\r\nconst yearNames = [2021, 2022, 2023];\r\nconst monthNames = [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Май\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Октябрь\", \"Ноябрь\", \"Декабрь\"];\r\nconst weekDayNames = [\"Пн\", \"Вт\", \"Ср\", \"Чт\" , \"Пт\", \"Сб\", \"Вс\"];\r\nconst daysByMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\nconst emptyDaysOnStartOfMonth = [6, 0, 1, 2, 3, 4, 5];\r\n\r\nlet monthSelect = useRef(null);\r\nlet yearSelect = useRef(null);\r\n\r\nconst year = date.getFullYear();\r\nconst month = date.getMonth();\r\n\r\n//navigation throught months and options for calendar\r\nconst moveToPrevMonth = () => {\r\n    const prevDate = new Date(year, month - 1);\r\n    setDate(prevDate);\r\n}\r\n\r\nconst moveToNextMonth = () => {\r\n    const nextDate = new Date(year, month + 1);\r\n    setDate(nextDate);\r\n}\r\nconst changeSelect = () => {\r\n    let monthValue = monthSelect.value;\r\n    let yearValue = yearNames[yearSelect.value];\r\n    const date = new Date(yearValue, monthValue);\r\n    setDate(date);\r\n}\r\nconst clickOnDate = (date) => {\r\n    const fullDateTemp = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\r\n    setDate(date);\r\n    setFullDate(fullDateTemp);\r\n    setDateVisibility(false);\r\n}\r\n\r\n// fill calendar with data\r\nconst primaryMonthDate = new Date(year, month);\r\nconst secondaryMonthDate = new Date(year, (month + 1));\r\n\r\nconst fillMonthData = (tempDate, a) => {\r\n    const monthData = [];\r\n    const daysInMonth = daysByMonth[tempDate.getMonth()];\r\n    const emptyMonthStart = emptyDaysOnStartOfMonth[tempDate.getDay()];\r\n    let day = 1;\r\n    \r\n    for (let i = 0; i < (daysInMonth + emptyMonthStart) / 7; i++) {\r\n        monthData[i] = [];\r\n        \r\n        for (let j = 0; j < 7; j++) {\r\n            if ((i === 0 && j < emptyMonthStart) || day > daysInMonth) {\r\n                monthData[i][j] = undefined;\r\n            } else {\r\n                monthData[i][j] = new Date(year, month+a , day++);\r\n            }\r\n        }\r\n    }\r\n    return monthData;\r\n}\r\nconst firstMonthResult = fillMonthData(primaryMonthDate, 0);\r\nconst secondMonthResult = fillMonthData(secondaryMonthDate, 1);\r\n\r\n    return (\r\n        <div {...rest}>\r\n        <CalendarHeader>\r\n            <button onClick={moveToPrevMonth}>&lt;</button>\r\n            \r\n            <select value={date.getMonth()} \r\n                    ref={element => monthSelect = element}\r\n                    onChange={changeSelect}>\r\n                    {monthNames.map((name, index) =>\r\n                    <option key={index} value={index}>{name}</option>\r\n                    )}\r\n            </select>\r\n            <select \r\n                    ref={element => yearSelect = element}\r\n                    onChange={changeSelect}>\r\n                    {yearNames.map((name, index) =>\r\n                    <option key={index} value={index}>{name}</option>\r\n                    )}\r\n            </select>\r\n            <button onClick={moveToNextMonth}>&gt;</button>\r\n        </CalendarHeader>\r\n        <CalendarMainWrapper>\r\n        <CalendarMain >\r\n            <table>\r\n            <caption>{monthNames[date.getMonth()]}</caption>\r\n                <thead>\r\n                    <tr>\r\n                        {weekDayNames.map(name =>\r\n                            <th key={name}>{name}</th>    \r\n                        )}\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    {firstMonthResult.map((week, index) =>\r\n                        <tr key={index} \r\n                            className=\"week\"\r\n                            >\r\n                            {week.map((date, index) => date \r\n                                ? <td key={index}\r\n                                        onClick={() => clickOnDate(date)}>\r\n                                        {date.getDate()}</td>\r\n                                : <td key={index} />\r\n                            )}\r\n                        </tr> \r\n                    )}\r\n                </tbody>\r\n                </table>\r\n        </CalendarMain>\r\n        <CalendarMain>\r\n            <table>\r\n            <caption>{monthNames[date.getMonth() + 1]}</caption>\r\n                <thead>\r\n                    <tr>\r\n                        {weekDayNames.map(name =>\r\n                            <th key={name}>{name}</th>    \r\n                        )}\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    {secondMonthResult.map((week, index) =>\r\n                        <tr key={index} \r\n                            className=\"week\"\r\n                            >\r\n                            {week.map((date, index) => date \r\n                                ? <td key={index}\r\n                                        onClick={() => clickOnDate(date)}>\r\n                                        {date.getDate()}</td>\r\n                                : <td key={index} />\r\n                            )}\r\n                        </tr> \r\n                    )}\r\n                </tbody>\r\n                </table>\r\n        </CalendarMain>\r\n        </CalendarMainWrapper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Calendar;","import styled from \"styled-components\";\r\nimport Calendar from \"./Calendar\";\r\n\r\nexport const DatePicker = styled(Calendar)`\r\n    position: absolute;\r\n    margin-top: 50px;\r\n    overflow: hidden;\r\n    z-index: 10;\r\n    background-color: #01a8d4;\r\n\r\n    td {\r\n        box-sizing: border-box;\r\n\r\n        &:hover {\r\n            box-shadow: 0 0 0 1px white;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    @media (max-width: 575px) {\r\n        left: 100px;\r\n        top: 100px;\r\n    }\r\n`\r\n","import React, {useState, useEffect} from \"react\";\r\n\r\nimport {MainTicketSearchWrapper, InputSubWrapper, DatePickerActivateField, CalendarWrapper} from \"./TicketSearch.style.js\";\r\nimport { StyledButton } from \"../Button/Button.style.js\";\r\nimport { StyledInput } from \"../Input/Input.style.js\";\r\nimport { StyledPagination } from \"../Pagination/Pagination.style.js\";\r\nimport { StyledDropDown } from \"../DropDown/DropDown.style.js\";\r\nimport { StyledCards } from \"../Cards/Cards.style.js\";\r\nimport { DatePicker } from \"../Calendar/Calendar.style.js\";\r\n\r\nimport * as axios from \"axios\";\r\nimport jsondata from '../Input/cities.json';\r\n\r\n\r\nconst TicketSearch = (props) => {\r\n\r\n    // const proxy = \"https://cors-anywhere.herokuapp.com/\";\r\n    // const token = \"e44551a4aa602315a353a5fc2d7bed15\";\r\n    // const api = \"http://api.travelpayouts.com/data/ru/cities.json\";\r\n\r\n    //errors\r\n    const [dataError, setDataError] = useState(false);\r\n    //set data into inputs\r\n    const [inputFrom, setInputFrom] = useState(\"\");\r\n    const [inputTo, setInputTo] = useState(\"\");\r\n    \r\n    //get date from inputs\r\n    // const [inputDate, setInputDate] = useState(\"\");\r\n    const [fullDate, setFullDate] = useState(\"\");\r\n    \r\n    //filter state and arrow of data from server\r\n    const [filteredDataFrom, setFilteredDataFrom] = useState([]);\r\n    const [filteredDataTo, setFilteredDataTo] = useState([]);\r\n    const [cities, setCities] = useState([]);\r\n    \r\n    const [ticketData, setTicketData] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [postsPerPage] = useState(10);\r\n\r\n    //activate drop down menu from button\r\n    const [dateVisibility, setDateVisibility] = useState(false);\r\n    \r\n    //paginator support data\r\n    const indexOfLastCard = currentPage * postsPerPage;\r\n    const indexOfFirstCard = indexOfLastCard - postsPerPage;\r\n    const currentCards = ticketData.slice(indexOfFirstCard, indexOfLastCard);\r\n\r\n    const paginate = (pageNumber) => {\r\n        setCurrentPage(pageNumber);\r\n    }\r\n    \r\n    //fetch cities from aviasales api using useEffect cause of sideeffect\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setLoading(true);\r\n            const response = await axios.get(\"/cities.json\");\r\n            setCities(response.data);\r\n            if (!response) {\r\n                setCities(jsondata);\r\n            }\r\n            setLoading(false);\r\n        }\r\n        fetchData();\r\n    }, []);\r\n    \r\n    //implement filter to find matches in response and input\r\n    const handleFilter = (event, setFilteredData, setWordEntered) => {\r\n        \r\n        if (event.target.value === \"\") {\r\n            setFilteredData([]);\r\n        } else {\r\n            setFilteredData(cities.filter((value) => {\r\n                return value.name.toLowerCase().includes(event.target.value.toLowerCase());\r\n            }));\r\n        }\r\n        setWordEntered(event.target.value.charAt(0).toUpperCase() + event.target.value.substr(1));\r\n    };\r\n\r\n    //make object from received data and send it to server\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const formData = {\r\n            \"from\": cities.find((item) => inputFrom === item.name).code,\r\n            \"to\": cities.find((item) => inputTo === item.name).code,\r\n            \"date\": fullDate,\r\n        }\r\n        console.log(formData);\r\n        const requestData =`?origin=${formData.from}&destination=${formData.to}&depart_day=${formData.date}&one_way=true`;\r\n\r\n        axios.get(\"http://min-prices.aviasales.ru/calendar_preload\" + requestData)\r\n        .then((response) => {\r\n            response = response.data.best_prices;\r\n        console.log(response);\r\n        setTicketData(response)\r\n        })\r\n        .catch(err => {\r\n            setDataError(true);\r\n        });\r\n    };\r\n\r\n    //add city from dropdown list to input\r\n    const addCity = (event, addCityToState, setFilteredData) => {\r\n        const target = event.target;\r\n        if (target.tagName.toLowerCase() === \"li\") {\r\n            setFilteredData([]);\r\n            addCityToState(target.textContent);\r\n        }\r\n    }\r\n\r\n    //visibility of calendar\r\n    let changeVisibility = () => setDateVisibility(!dateVisibility);\r\n\r\n    return (\r\n        <div>\r\n            <MainTicketSearchWrapper\r\n                onSubmit={handleSubmit}\r\n                >\r\n                <InputSubWrapper>\r\n                    <StyledInput \r\n                        // label={\"Откуда\"}\r\n                        placeholder=\"Откуда\"\r\n                        autoFocus={true} \r\n                        value={inputFrom}\r\n                        onInput={event => handleFilter(event, setFilteredDataFrom, setInputFrom)} \r\n                    />\r\n                    \r\n                    {filteredDataFrom.length !== 0 && \r\n                        <StyledDropDown setCustomInput={setInputFrom} \r\n                            filteredData={filteredDataFrom} \r\n                            setFilteredData={setFilteredDataFrom}\r\n                            addCity={addCity}/>}\r\n                </InputSubWrapper>\r\n\r\n                <InputSubWrapper>\r\n                    <StyledInput \r\n                        // label={\"Куда\"} \r\n                        placeholder=\"Куда\"\r\n                        value={inputTo}\r\n                        onInput={event => handleFilter(event, setFilteredDataTo, setInputTo)}\r\n                    />\r\n                    {filteredDataTo.length !== 0 && \r\n                        <StyledDropDown setCustomInput={setInputTo} \r\n                            filteredData={filteredDataTo} \r\n                            setFilteredData={setFilteredDataTo}\r\n                            addCity={addCity}/>}\r\n                </InputSubWrapper>\r\n\r\n                <CalendarWrapper>\r\n                    <DatePickerActivateField onClick={changeVisibility}>\r\n                        {fullDate ? `${fullDate}` : \"Дата\"}\r\n                    </DatePickerActivateField>\r\n                    {dateVisibility === true && \r\n                    <DatePicker\r\n                              setFullDate={setFullDate}\r\n                              setDateVisibility={setDateVisibility}\r\n                    />}\r\n                </CalendarWrapper>\r\n\r\n                    <StyledButton title=\"Submit\" \r\n                        children={\"Поиск\"}\r\n                    />\r\n            </MainTicketSearchWrapper>\r\n\r\n            <StyledCards ticketData={currentCards} \r\n                    loading={loading}\r\n                    dataError={dataError}/>\r\n            <StyledPagination postsPerPage={postsPerPage} totalPosts={ticketData.length} paginate={paginate}/>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TicketSearch;","import { createGlobalStyle } from \"styled-components\";\r\n\r\nexport const GlobalStyles = createGlobalStyle`\r\n    body {\r\n        box-sizing: border-box;\r\n        width: 100%;\r\n        height: 100vh;\r\n        margin: 0;\r\n        padding: 0;\r\n        background-color: #01a8d4;\r\n    }\r\n`","import TicketSearch from \"./components/TicketSearch/TicketSearch\";\nimport {GlobalStyles} from \"./GlobalStyles.style\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <GlobalStyles/>\n      <TicketSearch/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}